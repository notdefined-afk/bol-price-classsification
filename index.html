<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Price Classification — Partner Intelligence · bol</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
  :root {
    --blue: #0000FF;
    --blue-light: #e8e8ff;
    --blue-mid: #c0c0ff;
    --bg: #f5f5f5;
    --white: #ffffff;
    --border: #e0e0e0;
    --border-dark: #c8c8c8;
    --text: #1a1a1a;
    --muted: #767676;
    --muted-light: #a0a0a0;
    --green: #1a7a1a;
    --green-bg: #e8f5e8;
    --orange: #c45000;
    --orange-bg: #fff0e0;
    --red: #cc0000;
    --red-bg: #ffe8e8;
    --yellow: #8a6800;
    --yellow-bg: #fff8e0;
    --sans: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
  }

  * { box-sizing: border-box; margin: 0; padding: 0; }

  body {
    background: var(--bg);
    color: var(--text);
    font-family: var(--sans);
    font-size: 14px;
    line-height: 1.5;
    min-height: 100vh;
    -webkit-font-smoothing: antialiased;
  }

  .container { max-width: 1200px; margin: 0 auto; padding: 0 24px; }

  /* Header */
  header {
    background: var(--blue);
    padding: 0;
    position: sticky;
    top: 0;
    z-index: 100;
  }
  .header-inner {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 24px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    height: 56px;
  }
  .logo {
    display: flex;
    align-items: center;
    gap: 12px;
  }
  .logo-wordmark {
    font-size: 22px;
    font-weight: 700;
    color: #fff;
    letter-spacing: -0.5px;
    font-style: italic;
  }
  .logo-divider {
    width: 1px;
    height: 20px;
    background: rgba(255,255,255,0.3);
  }
  .logo-section {
    font-size: 13px;
    font-weight: 500;
    color: rgba(255,255,255,0.85);
  }
  .header-meta {
    font-size: 12px;
    color: rgba(255,255,255,0.6);
  }

  /* Hero section */
  .hero {
    background: var(--white);
    border-bottom: 1px solid var(--border);
    padding: 40px 0 0;
  }
  .hero-inner {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 24px;
  }
  .hero-eyebrow {
    font-size: 12px;
    font-weight: 500;
    color: var(--blue);
    text-transform: uppercase;
    letter-spacing: 0.8px;
    margin-bottom: 10px;
  }
  .hero h1 {
    font-size: 28px;
    font-weight: 700;
    line-height: 1.2;
    letter-spacing: -0.3px;
    margin-bottom: 8px;
    color: var(--text);
  }
  .hero p {
    color: var(--muted);
    font-size: 14px;
    max-width: 560px;
    line-height: 1.6;
    margin-bottom: 28px;
  }

  /* Tabs */
  .tabs {
    display: flex;
    gap: 0;
    border-bottom: none;
    margin-top: 0;
  }
  .tab {
    padding: 12px 20px;
    font-size: 14px;
    font-weight: 500;
    cursor: pointer;
    border: none;
    background: transparent;
    color: var(--muted);
    transition: all 0.15s;
    font-family: var(--sans);
    border-bottom: 3px solid transparent;
    margin-bottom: -1px;
  }
  .tab.active {
    color: var(--blue);
    border-bottom-color: var(--blue);
    font-weight: 600;
  }
  .tab:hover:not(.active) { color: var(--text); }

  /* Panel */
  .panel { display: none; animation: fadeIn 0.2s ease; }
  .panel.active { display: block; }
  @keyframes fadeIn { from { opacity:0; } to { opacity:1; } }

  /* Page content area */
  .page-content { padding: 24px 0 48px; }

  /* Stats row */
  .stats-row {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 12px;
    margin-bottom: 20px;
  }
  .stat-card {
    background: var(--white);
    border: 1px solid var(--border);
    border-radius: 6px;
    padding: 16px 20px;
    position: relative;
  }
  .stat-card::after {
    content: '';
    position: absolute;
    left: 0; top: 0; bottom: 0;
    width: 3px;
    border-radius: 6px 0 0 6px;
  }
  .stat-card.green::after { background: #1a7a1a; }
  .stat-card.yellow::after { background: #c4960a; }
  .stat-card.orange::after { background: #c45000; }
  .stat-card.red::after { background: #cc0000; }

  .stat-label {
    font-size: 12px;
    color: var(--muted);
    margin-bottom: 6px;
    font-weight: 500;
  }
  .stat-value {
    font-size: 28px;
    font-weight: 700;
    line-height: 1;
    margin-bottom: 4px;
    color: var(--text);
  }
  .stat-sub {
    font-size: 11px;
    color: var(--muted-light);
  }

  /* Main grid */
  .main-grid {
    display: grid;
    grid-template-columns: 1fr 360px;
    gap: 16px;
    margin-bottom: 20px;
  }

  /* Card */
  .card {
    background: var(--white);
    border: 1px solid var(--border);
    border-radius: 6px;
    overflow: hidden;
  }
  .card-header {
    padding: 14px 20px;
    border-bottom: 1px solid var(--border);
    display: flex;
    align-items: center;
    justify-content: space-between;
    background: var(--white);
  }
  .card-title {
    font-size: 14px;
    font-weight: 600;
    color: var(--text);
  }
  .card-subtitle {
    font-size: 12px;
    color: var(--muted);
    margin-top: 1px;
  }

  /* Badges */
  .badge {
    font-size: 11px;
    font-weight: 600;
    padding: 3px 8px;
    border-radius: 3px;
    letter-spacing: 0.2px;
  }
  .badge-green { background: var(--green-bg); color: var(--green); }
  .badge-orange { background: var(--orange-bg); color: var(--orange); }
  .badge-red { background: var(--red-bg); color: var(--red); }
  .badge-yellow { background: var(--yellow-bg); color: var(--yellow); }
  .badge-blue { background: var(--blue-light); color: var(--blue); }
  .badge-gray { background: #f0f0f0; color: var(--muted); }

  /* Table */
  table { width: 100%; border-collapse: collapse; }
  thead th {
    padding: 9px 16px;
    text-align: left;
    font-size: 11px;
    font-weight: 600;
    color: var(--muted);
    text-transform: uppercase;
    letter-spacing: 0.6px;
    background: #fafafa;
    border-bottom: 1px solid var(--border);
  }
  tbody tr { border-bottom: 1px solid var(--border); transition: background 0.1s; }
  tbody tr:last-child { border-bottom: none; }
  tbody tr:hover { background: #fafafa; }
  tbody td { padding: 11px 16px; font-size: 13px; vertical-align: middle; }
  .product-name { font-weight: 600; font-size: 13px; margin-bottom: 1px; color: var(--text); }
  .product-ean { font-size: 11px; color: var(--muted-light); font-family: monospace; }

  /* Stars */
  .stars { display: flex; gap: 2px; align-items: center; }
  .star { width: 9px; height: 9px; border-radius: 1px; }
  .star.filled { background: #f5a623; }
  .star.empty { background: #e0e0e0; }

  /* Price */
  .price-current { font-size: 13px; font-weight: 600; color: var(--text); font-variant-numeric: tabular-nums; }
  .price-market { font-size: 11px; color: var(--muted-light); font-variant-numeric: tabular-nums; }
  .price-delta { font-size: 11px; font-weight: 600; font-variant-numeric: tabular-nums; }
  .delta-pos { color: var(--red); }
  .delta-neg { color: var(--green); }

  /* Action btn */
  .action-btn {
    font-size: 12px;
    font-weight: 500;
    padding: 5px 12px;
    border-radius: 4px;
    border: 1px solid var(--border-dark);
    background: var(--white);
    color: var(--text);
    cursor: pointer;
    transition: all 0.15s;
    font-family: var(--sans);
  }
  .action-btn:hover { background: var(--blue); border-color: var(--blue); color: #fff; }

  /* Legend */
  .legend-card { padding: 0; }
  .legend-item {
    display: flex;
    align-items: flex-start;
    gap: 12px;
    padding: 14px 20px;
    border-bottom: 1px solid var(--border);
  }
  .legend-item:last-child { border-bottom: none; }
  .legend-stars { display: flex; gap: 2px; margin-top: 2px; flex-shrink: 0; }
  .legend-star { width: 10px; height: 10px; border-radius: 1px; background: #f5a623; }
  .legend-star.empty { background: #e0e0e0; }
  .legend-text h4 { font-size: 13px; font-weight: 600; margin-bottom: 2px; color: var(--text); }
  .legend-text p { font-size: 11px; color: var(--muted); line-height: 1.5; }
  .legend-impact { margin-left: auto; flex-shrink: 0; }

  /* Opportunities */
  .opp-list { }
  .opp-item {
    padding: 14px 20px;
    border-bottom: 1px solid var(--border);
    display: flex;
    align-items: center;
    justify-content: space-between;
    transition: background 0.1s;
    cursor: default;
  }
  .opp-item:last-child { border-bottom: none; }
  .opp-item:hover { background: #fafafa; }
  .opp-left h4 { font-size: 13px; font-weight: 600; margin-bottom: 3px; color: var(--text); }
  .opp-left p { font-size: 11px; color: var(--muted); }
  .opp-right { text-align: right; flex-shrink: 0; margin-left: 16px; }
  .opp-gain { font-size: 14px; font-weight: 700; color: var(--green); font-variant-numeric: tabular-nums; }
  .opp-type { font-size: 10px; font-weight: 600; color: var(--muted); text-transform: uppercase; letter-spacing: 0.4px; margin-top: 2px; }

  /* Simulator */
  .sim-layout { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; }
  .input-group { margin-bottom: 18px; }
  .input-label {
    font-size: 12px;
    font-weight: 500;
    color: var(--text);
    margin-bottom: 6px;
    display: block;
  }
  .input-field {
    width: 100%;
    background: var(--white);
    border: 1px solid var(--border-dark);
    border-radius: 4px;
    padding: 8px 12px;
    color: var(--text);
    font-family: var(--sans);
    font-size: 14px;
    outline: none;
    transition: border-color 0.15s;
  }
  .input-field:focus { border-color: var(--blue); box-shadow: 0 0 0 2px var(--blue-light); }
  .slider-row { display: flex; align-items: center; gap: 12px; }
  .slider {
    flex: 1;
    -webkit-appearance: none;
    height: 3px;
    border-radius: 2px;
    background: var(--border-dark);
    outline: none;
  }
  .slider::-webkit-slider-thumb {
    -webkit-appearance: none;
    width: 16px; height: 16px;
    border-radius: 50%;
    background: var(--blue);
    cursor: pointer;
    border: 2px solid #fff;
    box-shadow: 0 1px 3px rgba(0,0,0,0.2);
  }
  .slider-val {
    font-size: 14px;
    font-weight: 600;
    color: var(--text);
    min-width: 36px;
    text-align: right;
    font-variant-numeric: tabular-nums;
  }

  .sim-output {
    background: var(--white);
    border: 1px solid var(--border);
    border-radius: 6px;
    padding: 20px;
    margin-bottom: 12px;
  }
  .sim-result-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 9px 0;
    border-bottom: 1px solid var(--border);
  }
  .sim-result-row:last-child { border-bottom: none; }
  .sim-result-label { font-size: 12px; color: var(--muted); }
  .sim-result-value { font-size: 13px; font-weight: 600; font-variant-numeric: tabular-nums; }

  .big-stars { display: flex; gap: 4px; margin: 14px 0 10px; }
  .big-star { width: 22px; height: 22px; border-radius: 3px; transition: background 0.2s; }
  .big-star.filled { background: #f5a623; }
  .big-star.empty { background: #e0e0e0; }

  .classification-label {
    font-size: 22px;
    font-weight: 700;
    margin-bottom: 4px;
    color: var(--text);
  }
  .sim-status-green { color: var(--green); }
  .sim-status-yellow { color: var(--yellow); }
  .sim-status-red { color: var(--red); }
  .sim-status-gray { color: var(--muted); }

  /* Problems tab */
  .problem-section { margin-bottom: 36px; }
  .section-tag {
    font-size: 11px;
    font-weight: 600;
    color: var(--blue);
    text-transform: uppercase;
    letter-spacing: 0.8px;
    margin-bottom: 8px;
    display: block;
  }
  .section-title {
    font-size: 20px;
    font-weight: 700;
    margin-bottom: 8px;
    color: var(--text);
    letter-spacing: -0.2px;
  }
  .section-desc {
    font-size: 14px;
    color: var(--muted);
    line-height: 1.65;
    max-width: 680px;
    margin-bottom: 20px;
  }

  .problem-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; margin-bottom: 32px; }
  .problem-card {
    background: var(--white);
    border: 1px solid var(--border);
    border-radius: 6px;
    padding: 20px;
  }
  .problem-num { font-size: 11px; font-weight: 700; color: var(--blue); margin-bottom: 8px; letter-spacing: 0.5px; }
  .problem-title { font-size: 14px; font-weight: 700; margin-bottom: 8px; color: var(--text); }
  .problem-body { font-size: 12px; color: var(--muted); line-height: 1.65; }
  .problem-stat {
    margin-top: 14px;
    padding-top: 14px;
    border-top: 1px solid var(--border);
    font-size: 12px;
    font-weight: 600;
    color: var(--text);
    background: var(--blue-light);
    margin: 14px -20px -20px;
    padding: 10px 20px;
    border-radius: 0 0 6px 6px;
    border-top: 1px solid var(--blue-mid);
    color: var(--blue);
  }

  .priority-table { width: 100%; border-collapse: collapse; }
  .priority-table th {
    text-align: left;
    font-size: 11px;
    font-weight: 600;
    color: var(--muted);
    text-transform: uppercase;
    letter-spacing: 0.6px;
    padding: 10px 16px;
    background: #fafafa;
    border-bottom: 1px solid var(--border);
  }
  .priority-table td {
    padding: 14px 16px;
    font-size: 13px;
    border-bottom: 1px solid var(--border);
    vertical-align: top;
  }
  .priority-table tr:last-child td { border-bottom: none; }
  .p-rank { font-weight: 700; font-size: 16px; color: var(--text); }
  .p-rank.s1 { color: var(--blue); }
  .p-rank.s2 { color: var(--text); }
  .p-rank.s3 { color: var(--muted); }
  .p-rank.s4 { color: var(--muted-light); }

  .effort-bar { display: flex; gap: 3px; margin-top: 5px; }
  .effort-dot { width: 8px; height: 8px; border-radius: 2px; }
  .effort-dot.filled { background: var(--orange); }
  .effort-dot.empty { background: #e0e0e0; }

  .impact-bar { display: flex; gap: 3px; margin-top: 5px; }
  .impact-dot { width: 8px; height: 8px; border-radius: 2px; }
  .impact-dot.filled { background: var(--blue); }
  .impact-dot.empty { background: #e0e0e0; }

  .cta-banner {
    background: var(--blue);
    border-radius: 6px;
    padding: 24px 28px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-top: 24px;
  }
  .cta-text h3 { font-size: 16px; font-weight: 700; margin-bottom: 4px; color: #fff; }
  .cta-text p { font-size: 13px; color: rgba(255,255,255,0.75); }
  .cta-btn {
    background: #fff;
    color: var(--blue);
    border: none;
    padding: 10px 20px;
    border-radius: 4px;
    font-family: var(--sans);
    font-size: 13px;
    font-weight: 700;
    cursor: pointer;
    white-space: nowrap;
    transition: opacity 0.15s;
    flex-shrink: 0;
  }
  .cta-btn:hover { opacity: 0.9; }

  @media (max-width: 900px) {
    .stats-row { grid-template-columns: repeat(2, 1fr); }
    .main-grid { grid-template-columns: 1fr; }
    .problem-grid { grid-template-columns: 1fr; }
    .sim-layout { grid-template-columns: 1fr; }
  }
</style>
</head>
<body>

<header>
  <div class="header-inner">
    <div class="logo">
      <span class="logo-wordmark">bol</span>
      <div class="logo-divider"></div>
      <span class="logo-section">Partner Intelligence</span>
    </div>
    <div class="header-meta">Price classification · NL/BE</div>
  </div>
</header>


<div class="hero">
  <div class="hero-inner">
    <div class="hero-eyebrow">Partner Intelligence</div>
    <h1>Price rating overview</h1>
    <p>Monitor how bol rates your offers relative to the market, understand which listings have lost visibility, and model the impact of adjustments before applying them.</p>
    <div class="tabs">
      <button class="tab active" onclick="showTab('dashboard')">Offer overview</button>
      <button class="tab" onclick="showTab('simulator')">Price simulator</button>
      <button class="tab" onclick="showTab('problems')">Analysis</button>
    </div>
  </div>
</div>

<div class="container">
  <div class="page-content">

  <!-- DASHBOARD TAB -->
  <div id="tab-dashboard" class="panel active">

    <div class="stats-row">
      <div class="stat-card green">
        <div class="stat-label">Optimally priced</div>
        <div class="stat-value">2,841</div>
        <div class="stat-sub">Koopblok eligible · +14% vs prior period</div>
      </div>
      <div class="stat-card yellow">
        <div class="stat-label">Within range</div>
        <div class="stat-value">5,103</div>
        <div class="stat-sub">3–4 stars · adjustment may improve position</div>
      </div>
      <div class="stat-card orange">
        <div class="stat-label">Below threshold</div>
        <div class="stat-value">1,872</div>
        <div class="stat-sub">1–2 stars · excluded from advertising</div>
      </div>
      <div class="stat-card red">
        <div class="stat-label">Not shown</div>
        <div class="stat-value">304</div>
        <div class="stat-sub">Price deviation &gt;40% · removed from listings</div>
      </div>
    </div>

    <div class="main-grid">
      <!-- Product Table -->
      <div class="card">
        <div class="card-header">
          <div>
            <div class="card-title">Offer pricing overview</div>
            <div class="card-subtitle">Refreshed every 15 min · Ranked by revenue at risk</div>
          </div>
          <button class="action-btn" onclick="renderTable()">↻ Refresh</button>
        </div>
        <table>
          <thead>
            <tr>
              <th>Product</th>
              <th>Rating</th>
              <th>Listed price</th>
              <th>Market reference</th>
              <th>Deviation</th>
              <th>Classification</th>
              <th></th>
            </tr>
          </thead>
          <tbody id="product-table"></tbody>
        </table>
      </div>

      <!-- Legend -->
      <div class="card">
        <div class="card-header">
          <div>
            <div class="card-title">Rating methodology</div>
            <div class="card-subtitle">How bol assigns price ratings to offers</div>
          </div>
        </div>
        <div class="legend-card">
          <div class="legend-item">
            <div class="legend-stars">
              <div class="legend-star"></div><div class="legend-star"></div><div class="legend-star"></div><div class="legend-star"></div><div class="legend-star"></div>
            </div>
            <div class="legend-text">
              <h4>Market minimum</h4>
              <p>Lowest listed price across benchmarks<br>Koopblok priority · advertising eligible</p>
            </div>
            <span class="legend-impact badge-green badge">5 stars</span>
          </div>
          <div class="legend-item">
            <div class="legend-stars">
              <div class="legend-star"></div><div class="legend-star"></div><div class="legend-star"></div><div class="legend-star"></div><div class="legend-star empty"></div>
            </div>
            <div class="legend-text">
              <h4>Within 5% of market minimum</h4>
              <p>Strong koopblok candidacy<br>Full advertising eligibility</p>
            </div>
            <span class="legend-impact badge-green badge">4 stars</span>
          </div>
          <div class="legend-item">
            <div class="legend-stars">
              <div class="legend-star"></div><div class="legend-star"></div><div class="legend-star"></div><div class="legend-star empty"></div><div class="legend-star empty"></div>
            </div>
            <div class="legend-text">
              <h4>5–15% above market minimum</h4>
              <p>Reduced koopblok candidacy<br>Ad visible, lower click-through rate</p>
            </div>
            <span class="legend-impact badge-yellow badge">3 stars</span>
          </div>
          <div class="legend-item">
            <div class="legend-stars">
              <div class="legend-star"></div><div class="legend-star"></div><div class="legend-star empty"></div><div class="legend-star empty"></div><div class="legend-star empty"></div>
            </div>
            <div class="legend-text">
              <h4>15–30% above market minimum</h4>
              <p>Unlikely to win koopblok<br>Ad placement limited</p>
            </div>
            <span class="legend-impact badge-orange badge">2 stars</span>
          </div>
          <div class="legend-item">
            <div class="legend-stars">
              <div class="legend-star"></div><div class="legend-star empty"></div><div class="legend-star empty"></div><div class="legend-star empty"></div><div class="legend-star empty"></div>
            </div>
            <div class="legend-text">
              <h4>More than 30% above market minimum</h4>
              <p>No koopblok eligibility<br>Excluded from advertising</p>
            </div>
            <span class="legend-impact badge-red badge">1 star</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Opportunities -->
    <div class="card" style="margin-bottom: 24px;">
      <div class="card-header">
        <div>
          <div class="card-title">Recommended pricing actions</div>
          <div class="card-subtitle">Offers where an adjustment would improve rating and restore position</div>
        </div>
        <span class="badge badge-green">€4,280 estimated weekly impact</span>
      </div>
      <div class="opp-list">
        <div class="opp-item">
          <div class="opp-left">
            <h4>LEGO Technic 42143</h4>
            <p>2 stars · Adjust −€2.10 to reach 4 stars · +38% click-through estimated</p>
          </div>
          <div class="opp-right">
            <div class="opp-gain">€640/wk</div>
            <div class="opp-type">PRICE ADJUSTMENT</div>
          </div>
        </div>
        <div class="opp-item">
          <div class="opp-left">
            <h4>Philips Airfryer XL HD9270</h4>
            <p>3 stars · Adjust −€4.50 to reach 5 stars · Koopblok eligibility restored</p>
          </div>
          <div class="opp-right">
            <div class="opp-gain">€1,120/wk</div>
            <div class="opp-type">KOOPBLOK</div>
          </div>
        </div>
        <div class="opp-item">
          <div class="opp-left">
            <h4>Samsung 65" QLED QE65Q80C</h4>
            <p>Not shown · Adjust −€89 to reach 2 stars · Listing visibility restored</p>
          </div>
          <div class="opp-right">
            <div class="opp-gain">€980/wk</div>
            <div class="opp-type">VISIBILITY</div>
          </div>
        </div>
        <div class="opp-item">
          <div class="opp-left">
            <h4>Nespresso Vertuo Next</h4>
            <p>4 stars · Adjust −€1.20 to reach 5 stars · Review margin impact before adjusting</p>
          </div>
          <div class="opp-right">
            <div class="opp-gain">€280/wk</div>
            <div class="opp-type">LOW PRIORITY</div>
          </div>
        </div>
        <div class="opp-item">
          <div class="opp-left">
            <h4>Dyson V15 Detect</h4>
            <p>1 star · Adjust −€29 to reach 3 stars · Advertising eligibility restored</p>
          </div>
          <div class="opp-right">
            <div class="opp-gain">€1,260/wk</div>
            <div class="opp-type">AD ELIGIBILITY</div>
          </div>
        </div>
      </div>
    </div>

  </div>

  <!-- SIMULATOR TAB -->
  <div id="tab-simulator" class="panel">
    <div class="sim-layout">
      <div class="card" style="padding: 24px;">
        <div class="card-header" style="padding: 0 0 14px; margin-bottom: 20px; border-bottom: 1px solid var(--border); background: transparent;">
          <div>
            <div class="card-title">Price rating simulator</div>
            <div class="card-subtitle">Model how bol would classify an offer at a given price</div>
          </div>
        </div>

        <div class="input-group">
          <label class="input-label">Listed price (€)</label>
          <input type="number" class="input-field" id="sim-your-price" value="49.99" step="0.01" oninput="runSim()">
        </div>

        <div class="input-group">
          <label class="input-label">Market reference — lowest competitor (€)</label>
          <input type="number" class="input-field" id="sim-min-price" value="44.99" step="0.01" oninput="runSim()">
        </div>

        <div class="input-group">
          <label class="input-label">Active sellers on this listing</label>
          <div class="slider-row">
            <input type="range" class="slider" id="sim-sellers" min="1" max="30" value="8" oninput="runSim(); document.getElementById('sellers-val').textContent=this.value">
            <span class="slider-val" id="sellers-val">8</span>
          </div>
        </div>

        <div class="input-group">
          <label class="input-label">Seller rating (0–10)</label>
          <div class="slider-row">
            <input type="range" class="slider" id="sim-rating" min="0" max="10" step="0.1" value="8.4" oninput="runSim(); document.getElementById('rating-val').textContent=parseFloat(this.value).toFixed(1)">
            <span class="slider-val" id="rating-val">8.4</span>
          </div>
        </div>

        <div class="input-group">
          <label class="input-label">Delivery time</label>
          <select class="input-field" id="sim-delivery" onchange="runSim()">
            <option value="1">Same day / next day</option>
            <option value="2" selected>2–3 business days</option>
            <option value="3">4–7 business days</option>
            <option value="5">8–14 business days</option>
          </select>
        </div>

        <div class="input-group">
          <label class="input-label">Cost price (€) — used for margin calculation</label>
          <input type="number" class="input-field" id="sim-cost" value="32.00" step="0.01" oninput="runSim()">
        </div>
      </div>

      <div>
        <div class="sim-output" style="margin-bottom: 16px;">
          <div style="font-size: 11px; font-weight: 600; color: var(--muted); letter-spacing: 0.8px; text-transform: uppercase; margin-bottom: 4px;">Price rating</div>
          <div class="big-stars" id="sim-stars-display"></div>
          <div class="classification-label" id="sim-class-label">—</div>
          <div style="font-size: 12px; color: var(--muted);" id="sim-class-reason">Enter prices above</div>

          <div style="height: 1px; background: var(--border); margin: 20px 0;"></div>

          <div class="sim-result-row">
            <span class="sim-result-label">Deviation from market reference</span>
            <span class="sim-result-value" id="sim-premium">—</span>
          </div>
          <div class="sim-result-row">
            <span class="sim-result-label">Gross margin at listed price</span>
            <span class="sim-result-value" id="sim-margin">—</span>
          </div>
          <div class="sim-result-row">
            <span class="sim-result-label">Koopblok candidacy</span>
            <span class="sim-result-value" id="sim-buyblock">—</span>
          </div>
          <div class="sim-result-row">
            <span class="sim-result-label">Advertising eligibility</span>
            <span class="sim-result-value" id="sim-advis">—</span>
          </div>
          <div class="sim-result-row">
            <span class="sim-result-label">Reference price for improvement</span>
            <span class="sim-result-value" id="sim-rec">—</span>
          </div>
        </div>

        <div class="card" style="padding: 20px; background: #fafafa;">
          <div class="card-title" style="margin-bottom: 12px; font-size: 13px;">Price adjustments to improve rating</div>
          <div id="sim-upgrade-path" style="font-family: var(--mono); font-size: 12px; line-height: 1.9; color: var(--muted);"></div>
        </div>
      </div>
    </div>
  </div>

  <!-- PROBLEM SPACE TAB -->
  <div id="tab-problems" class="panel">

    <div class="problem-section">
      <span class="section-tag">Problem definition</span>
      <div class="section-title">Where price classification breaks down</div>
      <div class="section-desc">bol's 1–5 star price rating governs koopblok eligibility, ad access, and listing visibility for 51,000 partners. Six structural gaps make the system difficult to navigate and act on.</div>

      <div class="problem-grid">
        <div class="problem-card">
          <div class="problem-num">01</div>
          <div class="problem-title">Opaque thresholds</div>
          <ul class="problem-body" style="padding-left:14px;margin:0;list-style:disc;">
            <li>Exact deviation bands per star tier are not published</li>
            <li>Partners can't model a price change before making it</li>
            <li>Competitor moves can silently drop a rating with no warning</li>
          </ul>
          <div class="problem-stat">Assumed: ~68% of partners uncertain on criteria · To validate via partner survey</div>
        </div>
        <div class="problem-card">
          <div class="problem-num">02</div>
          <div class="problem-title">Delayed feedback loop</div>
          <ul class="problem-body" style="padding-left:14px;margin:0;list-style:disc;">
            <li>Partners detect downgrades through declining sales, not alerts</li>
            <li>Koopblok position and ad spend are lost before anyone notices</li>
            <li>Portal shows current rating only — no history, no triggers</li>
          </ul>
          <div class="problem-stat">Assumed: ~3 day detection lag · Proxy: platform event logs</div>
        </div>
        <div class="problem-card">
          <div class="problem-num">03</div>
          <div class="problem-title">Undifferentiated price pressure</div>
          <ul class="problem-body" style="padding-left:14px;margin:0;list-style:disc;">
            <li>Same deviation bands applied across all categories</li>
            <li>Electronics (high elasticity) and books (low elasticity) treated identically</li>
            <li>Creates systematically unfair classifications by category</li>
          </ul>
          <div class="problem-stat">Validated: price weighting varies 40–80% by category · ScienceDirect 2024</div>
        </div>
        <div class="problem-card">
          <div class="problem-num">04</div>
          <div class="problem-title">No margin context</div>
          <ul class="problem-body" style="padding-left:14px;margin:0;list-style:disc;">
            <li>System optimises for price rank, not partner profitability</li>
            <li>Partners sometimes sell below cost chasing a higher star tier</li>
            <li>No mechanism to surface this risk before the adjustment is made</li>
          </ul>
          <div class="problem-stat">Assumed: ~22% of adjustments reduce net margin · Requires cost price data</div>
        </div>
        <div class="problem-card">
          <div class="problem-num">05</div>
          <div class="problem-title">Algorithmic pricing instability</div>
          <ul class="problem-body" style="padding-left:14px;margin:0;list-style:disc;">
            <li>~40% of top listings have 2+ automated re-pricers active</li>
            <li>Two competing algorithms can inflate prices or race to unsustainable floors</li>
            <li>No detection layer exists on the platform today</li>
          </ul>
          <div class="problem-stat">Validated: ~40% of high-volume products have algorithmic sellers · ScienceDirect 2024</div>
        </div>
        <div class="problem-card">
          <div class="problem-num">06</div>
          <div class="problem-title">Tooling gap outsourced</div>
          <ul class="problem-body" style="padding-left:14px;margin:0;list-style:disc;">
            <li>Portal shows star rating — no simulation, history, or predictive tools</li>
            <li>Partners pay Channable, Omnia, PriceTweakers to fill the gap</li>
            <li>bol is funding a third-party ecosystem for a core platform function</li>
          </ul>
          <div class="problem-stat">Estimated: €3M+ annual partner spend on external repricers</div>
        </div>
      </div>
    </div>

    <!-- WEAKNESS 3 FIX: bol's incentive tension -->
    <div class="problem-section">
      <span class="section-tag">Platform perspective</span>
      <div class="section-title">Why bol has a stake in keeping this opaque</div>
      <div class="section-desc">This analysis is written from the partner lens — but a senior PM at bol must also hold the platform's perspective. More transparency for partners creates real tradeoffs for bol.</div>

      <div class="card" style="overflow: hidden; margin-bottom: 20px;">
        <div class="card-header">
          <div class="card-title">The dual-sided tension</div>
          <div class="card-subtitle">More transparency for partners may reduce bol's pricing leverage</div>
        </div>
        <div style="display:grid;grid-template-columns:1fr 1fr;border-top:1px solid var(--border);">
          <div style="padding:20px;border-right:1px solid var(--border);">
            <div style="font-size:12px;font-weight:700;color:var(--green);text-transform:uppercase;letter-spacing:0.6px;margin-bottom:12px;">Bol's interest in transparency</div>
            <ul style="font-size:13px;color:var(--text);line-height:1.8;padding-left:16px;margin:0;list-style:disc;">
              <li>Profitable partners invest more in the platform long-term</li>
              <li>Native tooling keeps partner spend inside the bol ecosystem</li>
              <li>Informed partners make fewer errors → less support overhead</li>
              <li>Competitive prices drive consumer trust and GMV</li>
            </ul>
          </div>
          <div style="padding:20px;">
            <div style="font-size:12px;font-weight:700;color:var(--red);text-transform:uppercase;letter-spacing:0.6px;margin-bottom:12px;">Bol's interest in opacity</div>
            <ul style="font-size:13px;color:var(--text);line-height:1.8;padding-left:16px;margin:0;list-style:disc;">
              <li>Exact bands enable gaming — partners price to the minimum, not below it</li>
              <li>Transparency may commoditise signals bol uses to steer behaviour</li>
              <li>Margin floors could reduce downward price pressure on the platform</li>
              <li>Category calibration requires ongoing data investment</li>
            </ul>
          </div>
        </div>
        <div style="padding:14px 20px;background:var(--blue-light);border-top:1px solid var(--blue-mid);font-size:13px;color:var(--text);line-height:1.6;">
          <strong>PM judgement:</strong> The right answer is <em>structured</em> transparency — show partners where they stand and what to adjust, without exposing the exact algorithmic weights. This preserves bol's classification leverage while eliminating the uncertainty that drives third-party tool adoption.
        </div>
      </div>
    </div>

    <div class="problem-section">
      <span class="section-tag">Initiative 4 — deep dive</span>
      <div class="section-title">Category-differentiated thresholds</div>
      <div class="section-desc">Uniform 5–15–30% bands applied across all categories create unfair classifications. A €10 gap on a €20 board game and a €10 gap on a €500 TV are not equivalent signals — but bol's system treats them identically today.</div>

      <div class="card" style="overflow:hidden;margin-bottom:20px;">
        <div class="card-header">
          <div class="card-title">Indicative recalibration by category</div>
          <div class="card-subtitle">Directional estimates · Requires validation against bol's internal conversion data</div>
        </div>
        <table>
          <thead>
            <tr>
              <th>Category</th>
              <th>Elasticity</th>
              <th>Current 4★ band</th>
              <th>Proposed 4★ band</th>
              <th>Why</th>
              <th>Partner impact</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td style="font-weight:600">Consumer electronics</td>
              <td><span class="badge badge-red">High</span></td>
              <td style="font-family:monospace">≤5%</td>
              <td style="font-family:monospace;color:var(--blue);font-weight:600">≤3%</td>
              <td style="color:var(--muted);font-size:12px">5% on a €500 TV = €25 — shoppers notice</td>
              <td style="color:var(--muted);font-size:12px">Tighter bands; more fall to 3★</td>
            </tr>
            <tr>
              <td style="font-weight:600">Toys &amp; games</td>
              <td><span class="badge badge-yellow">Medium</span></td>
              <td style="font-family:monospace">≤5%</td>
              <td style="font-family:monospace;color:var(--blue);font-weight:600">≤7%</td>
              <td style="color:var(--muted);font-size:12px">Brand loyalty + seasonal demand reduces pure price sensitivity</td>
              <td style="color:var(--muted);font-size:12px">More margin room at 4★</td>
            </tr>
            <tr>
              <td style="font-weight:600">Books &amp; media</td>
              <td><span class="badge badge-green">Low</span></td>
              <td style="font-family:monospace">≤5%</td>
              <td style="font-family:monospace;color:var(--blue);font-weight:600">≤12%</td>
              <td style="color:var(--muted);font-size:12px">Fixed RRP culture; consumers don't comparison shop below €2</td>
              <td style="color:var(--muted);font-size:12px">Significant margin relief for booksellers</td>
            </tr>
            <tr>
              <td style="font-weight:600">Personal care</td>
              <td><span class="badge badge-yellow">Medium</span></td>
              <td style="font-family:monospace">≤5%</td>
              <td style="font-family:monospace;color:var(--blue);font-weight:600">≤6%</td>
              <td style="color:var(--muted);font-size:12px">Brand trust dominant; repeat purchase reduces one-time price focus</td>
              <td style="color:var(--muted);font-size:12px">Minor relief; minimal disruption</td>
            </tr>
            <tr>
              <td style="font-weight:600">Fashion &amp; footwear</td>
              <td><span class="badge badge-yellow">Medium</span></td>
              <td style="font-family:monospace">≤5%</td>
              <td style="font-family:monospace;color:var(--blue);font-weight:600">≤8%</td>
              <td style="color:var(--muted);font-size:12px">Size/fit and style dominate over €5–€10 price gaps</td>
              <td style="color:var(--muted);font-size:12px">Wider tolerance; helps long-tail sellers</td>
            </tr>
          </tbody>
        </table>
        <div style="padding:14px 20px;background:#fafafa;border-top:1px solid var(--border);font-size:12px;color:var(--muted);">
          <strong style="color:var(--text);">Calibration method:</strong> Derive bands from bol's internal A/B conversion data — specifically the deviation point at which CTR drops materially vs. the koopblok winner. Validate with 8–12 weeks of data per category before rollout.
        </div>
      </div>
    </div>

    <!-- WEAKNESS 2 FIX: Data sourcing transparency -->
    <div class="problem-section">
      <span class="section-tag">Data validation</span>
      <div class="section-title">Supporting evidence — with sourcing transparency</div>
      <div class="section-desc">All metrics are labelled by confidence: <strong>Validated</strong> = published external source · <strong>Assumed</strong> = directional estimate needing internal validation · <strong>Proxy</strong> = derived from adjacent data.</div>

      <div class="card" style="overflow: hidden; margin-bottom: 32px;">
        <div class="card-header">
          <div class="card-title">Evidence by problem area</div>
          <div class="card-subtitle">Confidence level is explicit — assumptions are flagged, not presented as facts</div>
        </div>
        <table>
          <thead>
            <tr>
              <th>Metric</th>
              <th>Finding</th>
              <th>Source</th>
              <th>Confidence</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Koopblok purchase concentration</td>
              <td>97% of customers purchase from the koopblok winner</td>
              <td>ChannelEngine / bol partner data</td>
              <td><span class="badge badge-green">Validated</span></td>
            </tr>
            <tr>
              <td>Algorithmic seller prevalence</td>
              <td>Over 40% of top-2,800 products had automated re-pricing in study period</td>
              <td>ScienceDirect 2024 (bol.com dataset)</td>
              <td><span class="badge badge-green">Validated</span></td>
            </tr>
            <tr>
              <td>Algorithmic price coordination</td>
              <td>Prices are highest when two algorithms compete with a medium number of sellers</td>
              <td>Empirical analysis, bol.com pricing data 2020</td>
              <td><span class="badge badge-green">Validated</span></td>
            </tr>
            <tr>
              <td>1-star ad exclusion</td>
              <td>Offers rated 1 star are excluded from marketplace advertising</td>
              <td>bol partner platform documentation</td>
              <td><span class="badge badge-green">Validated</span></td>
            </tr>
            <tr>
              <td>Search page click distribution</td>
              <td>78% of clicks on page 1; 60% within the top 10 listings</td>
              <td>ChannelEngine marketplace report 2025</td>
              <td><span class="badge badge-green">Validated</span></td>
            </tr>
            <tr>
              <td>Partner uncertainty on rating criteria</td>
              <td>~68% of partners uncertain how ratings are assigned</td>
              <td>Directional estimate · To validate via bol partner survey or CS ticket analysis</td>
              <td><span class="badge badge-yellow">Assumed</span></td>
            </tr>
            <tr>
              <td>Rating downgrade detection lag</td>
              <td>~3.2 days average time to detect a star downgrade</td>
              <td>Proxy: ChannelEngine partner behaviour data · To validate with bol internal event logs</td>
              <td><span class="badge badge-yellow">Assumed</span></td>
            </tr>
            <tr>
              <td>Margin-eroding price adjustments</td>
              <td>~22% of rating-driven adjustments reduce net margin</td>
              <td>Derived estimate · Requires partner cost price data to validate</td>
              <td><span class="badge badge-orange">Proxy</span></td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <!-- WEAKNESS 5 FIX: Success metrics -->
    <div class="problem-section">
      <span class="section-tag">Success metrics</span>
      <div class="section-title">How we'd know each initiative is working</div>
      <div class="section-desc">Each initiative has a primary metric, a guard rail, a quantified target, and a validation timeline. Without these, a roadmap is a delivery plan — not a product strategy.</div>

      <div class="card" style="overflow:hidden;margin-bottom:24px;">
        <table class="priority-table">
          <thead>
            <tr>
              <th>#</th>
              <th>Initiative</th>
              <th>Primary metric (north star)</th>
              <th>Guard rail</th>
              <th>Target</th>
              <th>Validate by</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><span class="p-rank s1">1</span></td>
              <td style="font-weight:700">Price rating simulator</td>
              <td style="font-size:12px;color:var(--text)">% of partners who use simulator before making a price change (adoption rate)</td>
              <td style="font-size:12px;color:var(--muted)">No increase in partner support tickets re: rating confusion</td>
              <td style="font-size:12px;font-weight:600;color:var(--blue)">≥25% of active partners within 90 days</td>
              <td style="font-size:12px"><span class="badge badge-green">Now + 90d</span></td>
            </tr>
            <tr>
              <td><span class="p-rank s2">2</span></td>
              <td style="font-weight:700">Rating change alerts</td>
              <td style="font-size:12px;color:var(--text)">Reduction in median time from rating drop to corrective price change</td>
              <td style="font-size:12px;color:var(--muted)">Alert unsubscribe rate &lt;15%; no increase in erratic pricing</td>
              <td style="font-size:12px;font-weight:600;color:var(--blue)">Median lag &lt;4 hours (from ~3.2 days baseline)</td>
              <td style="font-size:12px"><span class="badge badge-green">Q1 + 60d</span></td>
            </tr>
            <tr>
              <td><span class="p-rank s3">3</span></td>
              <td style="font-weight:700">Margin floor protection</td>
              <td style="font-size:12px;color:var(--text)">% of partners who set a cost floor; % of flagged adjustments that partners override vs. accept</td>
              <td style="font-size:12px;color:var(--muted)">No reduction in platform GMV or koopblok competitiveness scores</td>
              <td style="font-size:12px;font-weight:600;color:var(--blue)">≥30% of partners set floor; ≥60% heed warnings</td>
              <td style="font-size:12px"><span class="badge badge-yellow">Q2 + 90d</span></td>
            </tr>
            <tr>
              <td><span class="p-rank s4">4</span></td>
              <td style="font-weight:700">Category thresholds</td>
              <td style="font-size:12px;color:var(--text)">Change in conversion rate by category after recalibration; partner revenue per SKU in affected categories</td>
              <td style="font-size:12px;color:var(--muted)">Consumer-facing price competitiveness scores maintained or improved</td>
              <td style="font-size:12px;font-weight:600;color:var(--blue)">+8% partner GMV in recalibrated categories; flat/positive consumer NPS</td>
              <td style="font-size:12px"><span class="badge badge-orange">Q3 + 12wk</span></td>
            </tr>
            <tr>
              <td><span class="p-rank s4">5</span></td>
              <td style="font-weight:700">Algorithmic detection</td>
              <td style="font-size:12px;color:var(--text)">% of flagged algorithmic patterns reviewed; reduction in coordinated pricing incidents on high-GMV listings</td>
              <td style="font-size:12px;color:var(--muted)">False positive rate &lt;5%; no adverse partner relations incidents from flags</td>
              <td style="font-size:12px;font-weight:600;color:var(--blue)">≥80% of flagged listings reviewed within 48h; 20% reduction in detected coordination incidents</td>
              <td style="font-size:12px"><span class="badge badge-orange">Q4 + 90d</span></td>
            </tr>
          </tbody>
        </table>
      </div>

      <div class="cta-banner">
        <div class="cta-text">
          <h3>Initiative 1 is implemented in the simulator tab</h3>
          <p>The price rating simulator demonstrates full end-to-end functionality as it would appear in the partner portal · Click any "Simulate" row in Offer overview to pre-load a product</p>
        </div>
        <button class="cta-btn" onclick="showTab('simulator')">View simulator</button>
      </div>
    </div>

  </div>

  </div><!-- /page-content -->
</div><!-- /container -->

<script>
  // ─── constants ───────────────────────────────────────────────────────────────
  const C = {
    green:  '#1a7a1a',
    yellow: '#8a6800',
    red:    '#cc0000',
    muted:  '#767676',
    blue:   '#0000ff',
  };

  // ─── tab switching ────────────────────────────────────────────────────────────
  function showTab(id) {
    document.querySelectorAll('.panel').forEach(p => p.classList.remove('active'));
    document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
    document.getElementById('tab-' + id).classList.add('active');
    const tabs = {dashboard:0, simulator:1, problems:2};
    document.querySelectorAll('.tab')[tabs[id]].classList.add('active');
    if (id === 'simulator') runSim();
  }

  // ─── product data (fixed, realistic, category-labelled) ──────────────────────
  // Weakness 1 fix: deterministic data pre-loaded on page render
  const products = [
    { name: 'LEGO Technic 42143 Ferrari Daytona', ean: '5702017117492', cat: 'Toys',        listed: 229.99, market: 199.99, cost: 148.00 },
    { name: 'Philips Airfryer XXL HD9630',        ean: '8720389002380', cat: 'Kitchen',      listed: 149.95, market: 139.00, cost: 89.00  },
    { name: 'Samsung Galaxy Tab S9 FE',           ean: '8806095160368', cat: 'Electronics',  listed: 379.00, market: 299.00, cost: 240.00 },
    { name: 'Nespresso Vertuo Next ENV120',        ean: '7630041682610', cat: 'Kitchen',      listed: 79.99,  market: 77.00,  cost: 44.00  },
    { name: 'Dyson V15 Detect Absolute',          ean: '5025155069882', cat: 'Home',         listed: 619.00, market: 449.00, cost: 380.00 },
    { name: 'Kindle Paperwhite (16 GB)',           ean: 'B09TMF6475',   cat: 'Electronics',  listed: 159.99, market: 159.99, cost: 98.00  },
    { name: 'Oral-B iO Series 7 Elektrische',     ean: '4210201409052', cat: 'Personal care',listed: 189.00, market: 149.00, cost: 92.00  },
    { name: 'Nike Air Max 270 (maat 42)',          ean: '0842778139460', cat: 'Fashion',      listed: 119.95, market: 109.99, cost: 62.00  },
  ];

  function getStars(listed, market) {
    const pct = (listed - market) / market * 100;
    if (pct <= 0)   return 5;
    if (pct <= 5)   return 4;
    if (pct <= 15)  return 3;
    if (pct <= 30)  return 2;
    return 1;
  }

  function renderStars(n) {
    return Array.from({length:5}, (_,i) =>
      `<div class="star ${i < n ? 'filled' : 'empty'}"></div>`
    ).join('');
  }

  function renderTable() {
    const tbody = document.getElementById('product-table');
    tbody.innerHTML = '';
    products.forEach(p => {
      const stars  = getStars(p.listed, p.market);
      const delta  = (p.listed - p.market) / p.market * 100;
      const status = {5:'badge-green',4:'badge-green',3:'badge-yellow',2:'badge-orange',1:'badge-red'}[stars];
      const label  = {5:'Optimal',4:'Competitive',3:'Within range',2:'Below threshold',1:'Not shown'}[stars];
      const dclass = delta > 0 ? 'delta-pos' : 'delta-neg';
      const dstr   = (delta > 0 ? '+' : '') + delta.toFixed(1) + '%';
      const margin = ((p.listed - p.cost) / p.listed * 100).toFixed(0);
      tbody.innerHTML += `
        <tr>
          <td>
            <div class="product-name">${p.name}</div>
            <div class="product-ean">EAN ${p.ean} · <span style="color:var(--muted-light)">${p.cat}</span></div>
          </td>
          <td><div class="stars">${renderStars(stars)}</div></td>
          <td><div class="price-current">€${p.listed.toFixed(2)}</div><div class="price-market">margin ${margin}%</div></td>
          <td><div class="price-current">€${p.market.toFixed(2)}</div></td>
          <td><div class="price-delta ${dclass}">${dstr}</div></td>
          <td><span class="badge ${status}">${label}</span></td>
          <td>
            <button class="action-btn" onclick="loadIntoSim(${products.indexOf(p)})">Simulate</button>
          </td>
        </tr>`;
    });
  }

  // Clicking "Simulate" on a row pre-loads that product into the simulator
  function loadIntoSim(idx) {
    const p = products[idx];
    document.getElementById('sim-your-price').value = p.listed;
    document.getElementById('sim-min-price').value  = p.market;
    document.getElementById('sim-cost').value       = p.cost;
    showTab('simulator');
  }

  // ─── simulator ───────────────────────────────────────────────────────────────
  function runSim() {
    const your     = parseFloat(document.getElementById('sim-your-price').value) || 0;
    const min      = parseFloat(document.getElementById('sim-min-price').value)  || 0;
    const cost     = parseFloat(document.getElementById('sim-cost').value)       || 0;
    const sellers  = parseInt(document.getElementById('sim-sellers').value);
    const rating   = parseFloat(document.getElementById('sim-rating').value);
    const delivery = parseInt(document.getElementById('sim-delivery').value);

    if (!your || !min || min <= 0) return;

    const pct    = (your - min) / min * 100;
    const stars  = getStars(your, min);
    const margin = your > 0 ? ((your - cost) / your * 100).toFixed(1) : '—';

    // Stars
    document.getElementById('sim-stars-display').innerHTML =
      Array.from({length:5}, (_,i) =>
        `<div class="big-star ${i < stars ? 'filled' : 'empty'}"></div>`
      ).join('');

    // Label + reason
    const labels  = {5:'Optimal',4:'Competitive',3:'Within range',2:'Below threshold',1:'Not shown'};
    const colours = {5:'sim-status-green',4:'sim-status-green',3:'sim-status-yellow',2:'sim-status-yellow',1:'sim-status-red'};
    const classEl = document.getElementById('sim-class-label');
    classEl.className   = 'classification-label ' + colours[stars];
    classEl.textContent = `${stars} stars — ${labels[stars]}`;

    const reasons = {
      5: 'Price is at or below the market reference. Offer qualifies for koopblok priority and full ad eligibility.',
      4: 'Within 5% of market minimum. Strong koopblok candidate, full advertising access.',
      3: '5–15% above market minimum. Reduced koopblok candidacy; ads visible but limited.',
      2: '15–30% above market minimum. Unlikely to win koopblok; ad placement suppressed.',
      1: 'More than 30% above the cheapest active offer. Excluded from advertising and koopblok.'
    };
    document.getElementById('sim-class-reason').textContent = reasons[stars];

    // Deviation
    const premEl = document.getElementById('sim-premium');
    premEl.textContent = (pct > 0 ? '+' : '') + pct.toFixed(1) + '% vs market minimum';
    premEl.style.color = pct <= 0 ? C.green : pct <= 5 ? C.yellow : C.red;

    // Margin
    const margEl = document.getElementById('sim-margin');
    margEl.textContent = margin + '%';
    margEl.style.color = parseFloat(margin) > 20 ? C.green : parseFloat(margin) > 10 ? C.yellow : C.red;

    // Koopblok probability
    let bb = [0, 5, 15, 40, 70, 85][stars];
    if (rating >= 9) bb += 8;
    if (delivery === 1) bb += 10;
    if (sellers > 10)   bb -= 10;
    bb = Math.min(95, Math.max(2, bb));
    const bbEl = document.getElementById('sim-buyblock');
    bbEl.textContent = bb + '% estimated';
    bbEl.style.color = bb > 60 ? C.green : bb > 30 ? C.yellow : C.red;

    // Ad eligibility
    const adEl = document.getElementById('sim-advis');
    adEl.textContent = stars >= 4 ? 'Eligible' : stars >= 2 ? 'Limited' : 'Excluded';
    adEl.style.color  = stars >= 4 ? C.green : stars >= 2 ? C.yellow : C.red;

    // Reference prices
    document.getElementById('sim-rec').textContent =
      `€${(min).toFixed(2)} for 5 stars · €${(min * 1.05).toFixed(2)} for 4 stars`;
    document.getElementById('sim-rec').style.color = C.blue;

    // Adjustment path
    const upgrades = [];
    const thresholds = {2:0.30, 3:0.15, 4:0.05, 5:0.00};
    for (let s = stars + 1; s <= 5; s++) {
      const target    = (min * (1 + thresholds[s])).toFixed(2);
      const drop      = (your - parseFloat(target)).toFixed(2);
      const newMargin = ((parseFloat(target) - cost) / parseFloat(target) * 100).toFixed(1);
      const marginNote = parseFloat(newMargin) < 10 ? ' ⚠ margin below 10%' : '';
      upgrades.push(`${s} stars → €${target} (−€${drop} · margin ${newMargin}%${marginNote})`);
    }
    document.getElementById('sim-upgrade-path').innerHTML = upgrades.length
      ? upgrades.map(u => `<div style="padding:4px 0;font-size:12px;color:var(--muted);border-bottom:1px solid var(--border)">→ ${u}</div>`).join('')
      : `<div style="color:${C.green};font-size:12px;font-weight:600">Already at the highest rating tier.</div>`;
  }

  // ─── init ─────────────────────────────────────────────────────────────────────
  renderTable();
  setTimeout(runSim, 100);
</script>
</body>
</html>
